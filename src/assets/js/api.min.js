(function(e){var c={};var d=(/android/gi).test(navigator.appVersion);var b=function(){var f=e.localStorage;if(d){f=os.localStorage()}return f};function a(g,i,h,f){if(typeof(i)=="function"){f=h;h=i;i=undefined}if(typeof(h)!="function"){f=h;h=undefined}return{url:g,data:i,fnSuc:h,dataType:f}}c.trim=function(f){if(String.prototype.trim){return f==null?"":String.prototype.trim.call(f)}else{return f.replace(/(^\s*)|(\s*$)/g,"")}};c.trimAll=function(f){return f.replace(/\s*/g,"")};c.isElement=function(f){return !!(f&&f.nodeType==1)};c.isArray=function(f){if(Array.isArray){return Array.isArray(f)}else{return f instanceof Array}};c.isEmptyObject=function(f){if(JSON.stringify(f)==="{}"){return true}return false};c.addEvt=function(i,g,h,f){if(!c.isElement(i)){console.warn("$api.addEvt Function need el param, el param must be DOM Element");return}f=f||false;if(i.addEventListener){i.addEventListener(g,h,f)}};c.rmEvt=function(i,g,h,f){if(!c.isElement(i)){console.warn("$api.rmEvt Function need el param, el param must be DOM Element");return}f=f||false;if(i.removeEventListener){i.removeEventListener(g,h,f)}};c.one=function(j,h,i,g){if(!c.isElement(j)){console.warn("$api.one Function need el param, el param must be DOM Element");return}g=g||false;var k=this;var f=function(){i&&i();k.rmEvt(j,h,f,g)};k.addEvt(j,h,f,g)};c.dom=function(g,f){if(arguments.length===1&&typeof arguments[0]=="string"){if(document.querySelector){return document.querySelector(arguments[0])}}else{if(arguments.length===2){if(g.querySelector){return g.querySelector(f)}}}};c.domAll=function(g,f){if(arguments.length===1&&typeof arguments[0]=="string"){if(document.querySelectorAll){return document.querySelectorAll(arguments[0])}}else{if(arguments.length===2){if(g.querySelectorAll){return g.querySelectorAll(f)}}}};c.byId=function(f){return document.getElementById(f)};c.first=function(g,f){if(arguments.length===1){if(!c.isElement(g)){console.warn("$api.first Function need el param, el param must be DOM Element");return}return g.children[0]}if(arguments.length===2){return this.dom(g,f+":first-child")}};c.last=function(h,f){if(arguments.length===1){if(!c.isElement(h)){console.warn("$api.last Function need el param, el param must be DOM Element");return}var g=h.children;return g[g.length-1]}if(arguments.length===2){return this.dom(h,f+":last-child")}};c.eq=function(g,f){return this.dom(g,":nth-child("+f+")")};c.not=function(g,f){return this.domAll(g,":not("+f+")")};c.prev=function(f){if(!c.isElement(f)){console.warn("$api.prev Function need el param, el param must be DOM Element");return}var g=f.previousSibling;if(g.nodeType&&g.nodeType===3){g=g.previousSibling;return g}};c.next=function(f){if(!c.isElement(f)){console.warn("$api.next Function need el param, el param must be DOM Element");return}var g=f.nextSibling;if(g.nodeType&&g.nodeType===3){g=g.nextSibling;return g}};c.closest=function(j,g){if(!c.isElement(j)){console.warn("$api.closest Function need el param, el param must be DOM Element");return}var k,i;var f=function(o,n){var m=0,l=o.length;for(m;m<l;m++){if(o[m].isSameNode(n)){return o[m]}}return false};var h=function(m,l){k=c.domAll(m.parentNode,l);i=f(k,m);while(!i){m=m.parentNode;if(m!=null&&m.nodeType==m.DOCUMENT_NODE){return false}h(m,l)}return i};return h(j,g)};c.contains=function(g,f){var h=false;if(f===g){h=true;return h}else{do{f=f.parentNode;if(f===g){h=true;return h}}while(f===document.body||f===document.documentElement);return h}};c.remove=function(f){if(f&&f.parentNode){f.parentNode.removeChild(f)}};c.attr=function(g,f,h){if(!c.isElement(g)){console.warn("$api.attr Function need el param, el param must be DOM Element");return}if(arguments.length==2){return g.getAttribute(f)}else{if(arguments.length==3){g.setAttribute(f,h);return g}}};c.removeAttr=function(g,f){if(!c.isElement(g)){console.warn("$api.removeAttr Function need el param, el param must be DOM Element");return}if(arguments.length===2){g.removeAttribute(f)}};c.hasCls=function(g,f){if(!c.isElement(g)){console.warn("$api.hasCls Function need el param, el param must be DOM Element");return}if(g.className.indexOf(f)>-1){return true}else{return false}};c.addCls=function(h,f){if(!c.isElement(h)){console.warn("$api.addCls Function need el param, el param must be DOM Element");return}if("classList" in h){h.classList.add(f)}else{var g=h.className;var i=g+" "+f;h.className=i}return h};c.removeCls=function(h,f){if(!c.isElement(h)){console.warn("$api.removeCls Function need el param, el param must be DOM Element");return}if("classList" in h){h.classList.remove(f)}else{var g=h.className;var i=g.replace(f,"");h.className=i}return h};c.toggleCls=function(g,f){if(!c.isElement(g)){console.warn("$api.toggleCls Function need el param, el param must be DOM Element");return}if("classList" in g){g.classList.toggle(f)}else{if(c.hasCls(g,f)){c.removeCls(g,f)}else{c.addCls(g,f)}}return g};c.val=function(f,h){if(!c.isElement(f)){console.warn("$api.val Function need el param, el param must be DOM Element");return
}if(arguments.length===1){switch(f.tagName){case"SELECT":var g=f.options[f.selectedIndex].value;return g;break;case"INPUT":return f.value;break;case"TEXTAREA":return f.value;break}}if(arguments.length===2){switch(f.tagName){case"SELECT":f.options[f.selectedIndex].value=h;return f;break;case"INPUT":f.value=h;return f;break;case"TEXTAREA":f.value=h;return f;break}}};c.prepend=function(g,f){if(!c.isElement(g)){console.warn("$api.prepend Function need el param, el param must be DOM Element");return}g.insertAdjacentHTML("afterbegin",f);return g};c.append=function(g,f){if(!c.isElement(g)){console.warn("$api.append Function need el param, el param must be DOM Element");return}g.insertAdjacentHTML("beforeend",f);return g};c.before=function(g,f){if(!c.isElement(g)){console.warn("$api.before Function need el param, el param must be DOM Element");return}g.insertAdjacentHTML("beforebegin",f);return g};c.after=function(g,f){if(!c.isElement(g)){console.warn("$api.after Function need el param, el param must be DOM Element");return}g.insertAdjacentHTML("afterend",f);return g};c.html=function(g,f){if(!c.isElement(g)){console.warn("$api.html Function need el param, el param must be DOM Element");return}if(arguments.length===1){return g.innerHTML}else{if(arguments.length===2){g.innerHTML=f;return g}}};c.text=function(g,f){if(!c.isElement(g)){console.warn("$api.text Function need el param, el param must be DOM Element");return}if(arguments.length===1){return g.textContent}else{if(arguments.length===2){g.textContent=f;return g}}};c.offset=function(h){if(!c.isElement(h)){console.warn("$api.offset Function need el param, el param must be DOM Element");return}var f=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);var g=Math.max(document.documentElement.scrollTop,document.body.scrollTop);var i=h.getBoundingClientRect();return{l:i.left+f,t:i.top+g,w:h.offsetWidth,h:h.offsetHeight}};c.css=function(g,f){if(!c.isElement(g)){console.warn("$api.css Function need el param, el param must be DOM Element");return}if(typeof f=="string"&&f.indexOf(":")>0){g.style&&(g.style.cssText+=";"+f)}};c.cssVal=function(g,h){if(!c.isElement(g)){console.warn("$api.cssVal Function need el param, el param must be DOM Element");return}if(arguments.length===2){var f=e.getComputedStyle(g,null);return f.getPropertyValue(h)}};c.jsonToStr=function(f){if(typeof f==="object"){return JSON&&JSON.stringify(f)}};c.strToJson=function(f){if(typeof f==="string"){return JSON&&JSON.parse(f)}};c.setStorage=function(h,i){if(arguments.length===2){var g=i;if(typeof g=="object"){g=JSON.stringify(g);g="obj-"+g}else{g="str-"+g}var f=b();if(f){f.setItem(h,g)}}};c.getStorage=function(h){var f=b();if(f){var g=f.getItem(h);if(!g){return}if(g.indexOf("obj-")===0){g=g.slice(4);return JSON.parse(g)}else{if(g.indexOf("str-")===0){return g.slice(4)}}}};c.rmStorage=function(g){var f=b();if(f&&g){f.removeItem(g)}};c.clearStorage=function(){var f=b();if(f){f.clear()}};c.fixIos7Bar=function(f){return c.fixStatusBar(f)};c.fixStatusBar=function(f){if(!c.isElement(f)){console.warn("$api.fixStatusBar Function need el param, el param must be DOM Element");return 0}f.style.paddingTop=api.safeArea.top+"px";return f.offsetHeight};c.fixTabBar=function(f){if(!c.isElement(f)){console.warn("$api.fixTabBar Function need el param, el param must be DOM Element");return 0}f.style.paddingBottom=api.safeArea.bottom+"px";return f.offsetHeight};c.toast=function(k,j,i){var h={};var f=function(l,m){api.showProgress(l);setTimeout(function(){api.hideProgress()},m)};if(arguments.length===1){var i=i||500;if(typeof k==="number"){i=k}else{h.title=k+""}f(h,i)}else{if(arguments.length===2){var i=i||500;var j=j;if(typeof j==="number"){var g=j;i=g;j=null}if(k){h.title=k}if(j){h.text=j}f(h,i)}}if(k){h.title=k}if(j){h.text=j}i=i||500;f(h,i)};c.post=function(){var f=a.apply(null,arguments);var g={};var i=f.fnSuc;f.url&&(g.url=f.url);f.data&&(g.data=f.data);if(f.dataType){var h=f.dataType.toLowerCase();if(h=="text"||h=="json"){g.dataType=h}}else{g.dataType="json"}g.method="post";api.ajax(g,function(j,k){if(j){i&&i(j)}})};c.get=function(){var f=a.apply(null,arguments);var g={};var i=f.fnSuc;f.url&&(g.url=f.url);if(f.dataType){var h=f.dataType.toLowerCase();if(h=="text"||h=="json"){g.dataType=h}}else{g.dataType="text"}g.method="get";api.ajax(g,function(j,k){if(j){i&&i(j)}})};e.$api=c})(window);